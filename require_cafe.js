define("strftime",[],function(){function e(e,t,n){typeof n=="undefined"&&(n=10),t=t.toString();for(;parseInt(e,10)<n&&n>1;n/=10)e=t+e;return e.toString()}function r(r,s,o){var u;if(!r)return"";s||(s=""),o||(o="en-US"),o=o.replace(/_/g,"-");if(!i[o]){console.warn("selected locale "+o+" not found, trying alternatives");var a=o.replace(/-[a-zA-Z]+$/,"");a in i?o=a:o="en",console.info("falling back to "+o)}u=i[o];var f=function(e,t){var r=n[t];return r==="locale"?u[t]:r},l=function(n,i){var o=t[i];return typeof o=="string"?r[o]():typeof o=="function"?o.call(r,r,u):o instanceof Array&&typeof o[0]=="string"?e(r[o[0]](),o[1]):(console.warn("unrecognised replacement type, please file a bug (format: "+s+")"),i)};s=s.replace(/%%/g,"%\b");while(s.match(/%[cDFhnrRtTxX]/))s=s.replace(/%([cDFhnrRtTxX])/g,f);var c=s.replace(/%([aAbBCdegGHIjklmMpPsSuUVwWyYzZ])/g,l);return c=c.replace("%\b","%%"),f=l=undefined,c}function s(e,t,n){n||(n="en"),i[e]=t;for(k in i[n])k in t||(i[e][k]=i[n][k])}var t={a:function(e,t){return t.a[e.getDay()]},A:function(e,t){return t.A[e.getDay()]},b:function(e,t){return t.b[e.getMonth()]},B:function(e,t){return t.B[e.getMonth()]},C:function(t){return e(parseInt(t.getFullYear()/100,10),0)},d:["getDate","0"],e:["getDate"," "],g:function(n){return e(parseInt(t.G(n)%100,10),0)},G:function(e){var n=e.getFullYear(),r=parseInt(t.V(e),10),i=parseInt(t.W(e),10);return i>r?n++:i===0&&r>=52&&n--,n},H:["getHours","0"],I:function(t){var n=t.getHours()%12;return e(n===0?12:n,0)},j:function(t){var n=new Date(""+t.getFullYear()+"/1/1 GMT"),r=new Date(""+t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()+" GMT"),i=r-n,s=parseInt(i/6e4/60/24,10)+1;return e(s,0,100)},k:["getHours"," "],l:function(t){var n=t.getHours()%12;return e(n===0?12:n," ")},m:function(t){return e(t.getMonth()+1,0)},M:["getMinutes","0"],p:function(e,t){return t.p[e.getHours()>=12?1:0]},P:function(e,t){return t.P[e.getHours()>=12?1:0]},s:function(e,t){return parseInt(e.getTime()/1e3,10)},S:["getSeconds","0"],u:function(e){var t=e.getDay();return t===0?7:t},U:function(n){var r=parseInt(t.j(n),10),i=6-n.getDay(),s=parseInt((r+i)/7,10);return e(s,0)},V:function(n){var r=parseInt(t.W(n),10),i=(new Date(""+n.getFullYear()+"/1/1")).getDay(),s=r+(i>4||i<=1?0:1);return s===53&&(new Date(""+n.getFullYear()+"/12/31")).getDay()<4?s=1:s===0&&(s=t.V(new Date(""+(n.getFullYear()-1)+"/12/31"))),e(s,0)},w:"getDay",W:function(n){var r=parseInt(t.j(n),10),i=7-t.u(n),s=parseInt((r+i)/7,10);return e(s,0,10)},y:function(t){return e(t.getFullYear()%100,0)},Y:"getFullYear",z:function(t){var n=t.getTimezoneOffset(),r=e(parseInt(Math.abs(n/60),10),0),i=e(Math.abs(n%60),0);return(n>0?"-":"+")+r+i},Z:function(e){var n=e.toString().replace(/^.*:\d\d( GMT[+-]\d+)? \(?([A-Za-z ]+)\)?\d*$/,"$2").replace(/[a-z ]/g,"");return n.length>4&&(n=t.z(e)),n},"%":function(e){return"%"}},n={c:"locale",D:"%m/%d/%y",F:"%Y-%m-%d",h:"%b",n:"\n",r:"%I:%M:%S %p",R:"%H:%M",t:"	",T:"%H:%M:%S",x:"locale",X:"locale"},i={};return i.en={a:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],A:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B:["January","February","March","April","May","June","July","August","September","October","November","December"],c:"%a %d %b %Y %T %Z",p:["AM","PM"],P:["am","pm"],r:"%I:%M:%S %p",x:"%d/%m/%y",X:"%T"},s("en-US",{c:"%a %d %b %Y %I:%M:%S %p %Z",x:"%m/%d/%Y",X:"%I:%M:%S %p"}),s("en-GB",{r:"%l:%M:%S %P %Z"}),s("en-AU",{}),r.addLocale=s,{strftime:r}}),function(){var e={}.hasOwnProperty,t=[].slice;define("cream",["strftime"],function(n){var r;return Object["delete"]=function(e,t){var n;return n=e[t],delete e[t],n},Object.clone=function(e){var t,n;if(e==null||typeof e!="object")return e;n=new e.constructor;for(t in e)n[t]=Object.clone(e[t]);return n},Object.merge=function(t,n){var r,i;t=Object.clone(t);for(r in n){if(!e.call(n,r))continue;i=n[r],t[r]=i}return t},Object.update=function(t,n){var r,i;for(r in n){if(!e.call(n,r))continue;i=n[r],t[r]=i}return t},Object.toArray=function(t){var n,r,i;i=[];for(n in t){if(!e.call(t,n))continue;r=t[n],i.push([n,r])}return i},Object.isPlainObject=function(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e)===Object.prototype&&Object.prototype.toString.call(e)==={}.toString()||!1},Object.fromArray=function(e){var t,n,r,i;t=new Object;for(r=0,i=e.length;r<i;r++)n=e[r],t[n[0]]=n[1];return t},Object.invert=function(t){var n,r;return Object.fromArray(function(){var i;i=[];for(n in t){if(!e.call(t,n))continue;r=t[n],i.push([r,n])}return i}())},Array.wrap=function(e){return e instanceof Array?e:e===null||e===void 0?[]:[e]},Array.prototype.sum=function(){return this.length>0?this.reduce(function(e,t){return e+t}):0},Array.prototype.first=function(){return this.length>0?this[0]:void 0},Array.prototype.last=function(){if(this.length>0)return this[this.length-1]},Array.prototype.butLast=function(){if(this.length>0)return this.slice(0,-1)},Array.prototype.max=function(){return Math.max.apply(Math,this)},Array.prototype.min=function(){return Math.min.apply(Math,this)},Array.prototype.zip=function(){var e,n,r,i,s,o,u,a,f;n=1<=arguments.length?t.call(arguments,0):[],n=[Object.clone(this)].concat(n),s=n.map(function(e){return e.length}).max(),o=[];for(i=u=0;0<=s?u<s:u>s;i=0<=s?++u:--u){r=[];for(a=0,f=n.length;a<f;a++)e=n[a],r.push(e[i]);o.push(r)}return o},Array.prototype.flatten=function(){return this.reduce(function(e,t){return Array.isArray(t)?e.concat(t.flatten()):e.concat([t])},[])},Array.prototype.select=Array.prototype.filter,Array.prototype.reject=function(e){return this.select(function(t){return!e(t)})},Array.prototype.compact=function(){return this.reject(function(e){return e===void 0||e===null})},Array.prototype.extract_options=function(){return Object.isPlainObject(this.last())?this.pop():{}},Array.prototype.group_by=function(e){var t,n,r,i,s;t={};for(i=0,s=this.length;i<s;i++)n=this[i],r=e(n),t[r]?t[r].push(n):t[r]=[n];return t},String.prototype.capitalize=function(){return this.trim().length===0?this.valueOf():this.split(" ").map(function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()}).join(" ")},String.prototype.humanize=function(){var e,t;return e=this.valueOf(),e=e.replace(/_id$/g,""),e=e.replace(/_/g," "),t=e.split(" "),t.length>1?e=t[0].capitalize()+" "+t.slice(1).join(" "):e=t[0].capitalize()},String.prototype.beginsWith=function(e){return this.match(new RegExp("^"+e))?!0:!1},String.prototype.endsWith=function(e){return this.match(new RegExp(""+e+"$"))?!0:!1},String.prototype.dasherize=function(e){return e==null&&(e=/_/g),typeof e=="string"&&(e=new RegExp(e,"g")),this.replace(e,"-")},String.prototype.strip=String.prototype.trim,String.prototype.html_safe=function(){return this.is_html_safe=1,this},Number.prototype.seconds=function(){return this*1e3},Number.prototype.minutes=function(){return this.seconds()*60},Number.prototype.minute=Number.prototype.minutes,Number.prototype.hours=function(){return this.minutes()*60},Number.prototype.hour=Number.prototype.hours,Number.prototype.ago=function(){return new Date((new Date).valueOf()-this)},Number.prototype.from_now=function(){return new Date((new Date).valueOf()+this)},Date.COMMON_YEAR_DAYS_IN_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31],Date.is_gregorian_leap_year=function(e){return e%4===0&&e%100!==0||e%400===0},Date.prototype.days_in_month=function(){return this.getMonth()===1&&Date.is_gregorian_leap_year(this.getFullYear())?29:Date.COMMON_YEAR_DAYS_IN_MONTH[this.getMonth()]},Date.prototype.tomorrow=function(){return new Date(this.valueOf()+864e5)},Date.prototype.yesterday=function(){return new Date(this.valueOf()-864e5)},Date.prototype.beginning_of_day=function(){return new Date((new Date(this)).setHours(0,0,0,0))},Date.prototype.end_of_day=function(){return new Date((new Date(this)).setHours(23,59,59,999))},Date.prototype.prev_month=function(){var e,t,n;return e=new Date(this),t=e.beginning_of_month(),t.setMonth(this.getMonth()-1),n=t.days_in_month(),n<e.getDate()&&e.setDate(n),e.setMonth(this.getMonth()-1),e},Date.prototype.next_month=function(){var e,t,n;return e=new Date(this),t=e.beginning_of_month(),t.setMonth(this.getMonth()+1),n=t.days_in_month(),n<e.getDate()&&e.setDate(n),e.setMonth(this.getMonth()+1),e},Date.prototype.beginning_of_month=function(){return(new Date((new Date(this)).setDate(1))).beginning_of_day()},Date.prototype.end_of_month=function(){var e;return e=this.days_in_month(),(new Date((new Date(this)).setDate(e))).end_of_day()},r=n.strftime,Date.prototype.strftime=function(e){return r(this,e)}})}.call(this),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};define("tag_helper",["cream"],function(t){var n,r;return n=function(){function i(){}var t,n,r;return n={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;"},r={"&":"&",">":">","<":"<"},t=["disabled","readonly","multiple","checked","autobuffer","autoplay","controls","loop","selected","hidden","scoped","async","defer","reversed","ismap","seemless","muted","required","autofocus","novalidate","formnovalidate","open","pubdate"],i.prototype.html_escape=function(e){return e instanceof String||(e=String(e)),e.is_html_safe==null?e.replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/>/g,"&gt;").replace(/</g,"&lt;").html_safe():e},i.prototype.tag=function(e,t,n,r){var i;return t==null&&(t=null),n==null&&(n=!1),r==null&&(r=!0),i="",t&&(i=this.tag_options(t,r)),("<"+e+i+(n?">":" />")).html_safe()},i.prototype.content_tag=function(e,t,n,r){return t==null&&(t=null),n==null&&(n=null),r==null&&(r=!0),this.content_tag_string(e,t,n,r)},i.prototype.content_tag_string=function(e,t,n,r){var i;return r==null&&(r=!0),i=n?this.tag_options(n,r):"",("<"+e+i+">"+(r?this.html_escape(t):t)+"</"+e+">").html_safe()},i.prototype.tag_options=function(n,r){var i,s,o,u,a,f,l;r==null&&(r=!0),a=function(){var e;e=[];for(o in n)f=n[o],e.push(o);return e}();if(a.length!==0){i=[];for(u in n){l=n[u];if(u==="data"&&typeof l=="object")for(o in l)f=l[o],typeof f!="string"&&(f=JSON.stringify(f)),r&&(f=this.html_escape(f)),i.push("data-"+o.dasherize()+'="'+f+'"');else e.call(t,u)>=0?l&&i.push(""+u+'="'+u+'"'):l!==null&&l!==void 0&&(s=l,l instanceof Array&&(s=l.join(" ")),r&&(s=this.html_escape(s)),i.push(""+u+'="'+s+'"'))}if(i.length!==0)return(" "+i.sort().join(" ")).html_safe()}},i}(),r=new n,{html_escape:r.html_escape,tag:r.tag,content_tag:r.content_tag_string,tag_options:r.tag_options}})}.call(this),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};define("datetime_selector",["cream","tag_helper"],function(t,n){var r;return r=function(){function t(e,t,n){t==null&&(t={}),n==null&&(n={}),this.options=Object.clone(t),this.html_options=Object.clone(n),e instanceof Date?this.datetime=e:e&&(this.datetime=new Date(new String(e))),this.options.datetime_separator==null&&(this.options.datetime_separator=" &mdash; "),this.options.time_separator==null&&(this.options.time_separator=" : "),this.sec=function(){var e;return(e=this.datetime)!=null?e.getSeconds():void 0},this.min=function(){var e;return(e=this.datetime)!=null?e.getMinutes():void 0},this.hour=function(){var e;return(e=this.datetime)!=null?e.getHours():void 0},this.day=function(){var e;return(e=this.datetime)!=null?e.getDate():void 0},this.month=function(){if(this.datetime)return this.datetime.getMonth()%12+1},this.year=function(){var e;return(e=this.datetime)!=null?e.getFullYear():void 0}}return t.prototype.date_order=function(){return this.options.order||["year","month","day"]||[]},t.prototype.select_datetime=function(){var t,n,r,i,s,o,u,a,f,l;n=Object.clone(this.date_order()),n=n.filter(function(e){return e!=="hour"&&e!=="minute"&&e!=="second"}),(r=this.options).discard_year||(r.discard_year=e.call(n,"year")<0?!0:void 0),(i=this.options).discard_month||(i.discard_month=e.call(n,"month")<0?!0:void 0),(s=this.options).discard_day||(s.discard_day=this.options.discard_month||e.call(n,"day")<0?!0:void 0),(o=this.options).discard_minute||(o.discard_minute=this.options.discard_hour?!0:void 0),(u=this.options).discard_second||(u.discard_second=!this.options.include_seconds||!!this.options.discard_minute?!0:void 0),this.datetime&&this.options.discard_day&&!this.options.discard_month&&this.datetime.setDate(1);if(this.options.tag&&this.options.ignore_date)return this.select_time();l=["day","month","year"];for(a=0,f=l.length;a<f;a++)t=l[a],e.call(n,t)<0&&n.unshift(t);return this.options.discard_hour||(n=n.concat(["hour","minute","second"])),this.build_selects_from_types(n).valueOf()},t.prototype.select_date=function(){var t,n,r,i,s,o,u,a,f;n=Object.clone(this.date_order()),this.options.discard_hour=!0,this.options.discard_minute=!0,this.options.discard_second=!0,(i=this.options).discard_year||(i.discard_year=e.call(n,"year")<0?!0:void 0),(s=this.options).discard_month||(s.discard_month=e.call(n,"month")<0?!0:void 0),(o=this.options).discard_day||(o.discard_day=this.options.discard_month||e.call(n,"day")<0?!0:void 0),this.datetime&&this.options.discard_day&&!this.options.discard_month&&this.datetime.setDate(1),f=["day","month","year"];for(u=0,a=f.length;u<a;u++)t=f[u],e.call(n,t)<0&&n.unshift(t);return r=this.build_selects_from_types(n).valueOf(),r},t.prototype.select_time=function(){var e,t;return e=[],this.options.discard_month=!0,this.options.discard_year=!0,this.options.discard_day=!0,(t=this.options).discard_second||(t.discard_second=this.options.include_seconds?void 0:!0),this.options.ignore_date||(e=e.concat(["year","month","day"])),e=e.concat(["hour","minute"]),this.options.include_seconds&&e.push("second"),this.build_selects_from_types(e)},t.prototype.select_second=function(){return this.options.use_hidden||this.options.discard_second?this.options.include_seconds?this.build_hidden("second",this.sec()):"":this.build_options_and_select("second",this.sec())},t.prototype.select_minute=function(){return this.options.use_hidden||this.options.discard_minute?this.build_hidden("minute",this.min()):this.build_options_and_select("minute",this.min(),{step:this.options.minute_step})},t.prototype.select_hour=function(){return this.options.use_hidden||this.options.discard_hour?this.build_hidden("hour",this.hour()):this.build_options_and_select("hour",this.hour(),{end:23,ampm:this.options.ampm})},t.prototype.select_day=function(){return this.options.use_hidden||this.options.discard_day?this.build_hidden("day",this.day()):this.build_options_and_select("day",this.day(),{start:1,end:31,leading_zeros:!1})},t.prototype.select_month=function(){var e,t,r,i;if(this.options.use_hidden||this.options.discard_month)return this.build_hidden("month",this.month());t=[];for(e=i=1;i<=12;e=++i)r={value:e},this.month()===e&&(r.selected="selected"),t.push(n.content_tag("option",this.month_name(e),r)+"\n");return this.build_select("month",t.join(""))},t.prototype.select_year=function(){var e,t,n;return!this.datetime||this.datetime===0?(n="",e=(new Date).getFullYear()):n=e=this.year(),this.options.use_hidden||this.options.discard_year?this.build_hidden("year",n):(t={},t.start=this.options.start_year||e-5,t.end=this.options.end_year||e+5,t.step=t.start<t.end?1:-1,t.leading_zeros=!1,this.build_options_and_select("year",n,t))},t.prototype.build_selects_from_types=function(e){var t,n,r,i,s,o,u;n="",u=Object.clone(e).reverse();for(s=0,o=u.length;s<o;s++)i=u[s],i===e.first()?r="":r=this.separator(i),t=this["select_"+i](),n=""+r+t+n;return n.html_safe()},t.prototype.separator=function(e){var t;return t=function(){switch(e){case"year":return this.options.discard_year?"":this.options.date_separator;case"month":return this.options.discard_month?"":this.options.date_separator;case"day":return this.options.discard_day?"":this.options.date_separator;case"hour":return this.options.discard_year&&this.options.discard_day?"":this.options.datetime_separator;case"minute":return this.options.discard_minute?"":this.options.time_separator;case"second":return this.options.include_seconds?this.options.time_separator:""}}.call(this),t||(t="")},t.prototype.month_names=function(){var e;return e=this.options.use_month_names||this.translated_month_names(),e.length<13&&e.unshift(null),e},t.prototype.month_name=function(e){return this.options.use_month_numbers?e:this.options.add_month_numbers?""+e+" - "+this.month_names()[e]:this.month_names()[e]},t.prototype.translated_month_names=function(){return this.options.use_short_month?[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]:["January","February","March","April","May","June","July","August","September","October","November","December"]},t.prototype.build_options_and_select=function(e,t,n){return n==null&&(n={}),this.build_select(e,this.build_options(t,n))},t.prototype.AMPM_TRANSLATION={0:"12 AM",1:"01 AM",2:"02 AM",3:"03 AM",4:"04 AM",5:"05 AM",6:"06 AM",7:"07 AM",8:"08 AM",9:"09 AM",10:"10 AM",11:"11 AM",12:"12 PM",13:"01 PM",14:"02 PM",15:"03 PM",16:"04 PM",17:"05 PM",18:"06 PM",19:"07 PM",20:"08 PM",21:"09 PM",22:"10 PM",23:"11 PM"},t.prototype.DEFAULT_PREFIX="date",t.prototype.POSITION={year:1,month:2,day:3,hour:4,minute:5,second:6},t.prototype.build_options=function(e,t){var r,i,s,o,u,a,f,l,c,h;t==null&&(t={}),o=0,t.start&&(o=t.start,delete t.start),a=59,t.end&&(a=t.end,delete t.end),u=1,t.step&&(u=t.step,delete t.step),t.leading_zeros==null&&(t.leading_zeros=!0),i=t.leading_zeros,delete t.leading_zeros,t.ampm==null&&(t.ampm=!1),s=[];for(r=h=o;u>0?h<=a:h>=a;r=h+=u)c=String(r),i&&(c.length===1?c="0"+c:c.length===0&&(c="00")),f={value:c},e===r&&(f.selected="selected"),l=t.ampm?this.AMPM_TRANSLATION[r]:c,s.push(n.content_tag("option",l,f));return(s.join("\n")+"\n").html_safe()},t.prototype.build_select=function(e,t){var r,i,s,o,u;s={id:this.input_id_from_type(e),name:this.input_name_from_type(e)},u=this.html_options;for(r in u)o=u[r],s[r]=o;return this.options.disabled&&(s.disabled="disabled"),i="\n",this.options.include_blank&&(i+=n.content_tag("option","",{value:""})+"\n"),this.options.prompt&&(i+=this.prompt_option_tag(e,this.options.prompt)+"\n"),i+=t,(n.content_tag("select",i.html_safe(),s)+"\n").html_safe()},t.prototype.build_hidden=function(e,t){var r;return r={type:"hidden",id:this.input_id_from_type(e),name:this.input_name_from_type(e),value:t},this.html_options.disabled&&(r=this.html_options.disabled),(n.tag("input",r)+"\n").html_safe()},t.prototype.input_name_from_type=function(t){var n,r,i,s;return i=this.options.prefix||this.DEFAULT_PREFIX,e.call(function(){var e,t;e=this.options,t=[];for(r in e)s=e[r],t.push(r);return t}.call(this),"index")>=0&&(i+="["+this.options.index+"]"),n=this.options.field_name||t,this.options.include_position&&(n+="("+this.POSITION[t]+"i)"),this.options.discard_type?i:""+i+"["+n+"]"},t.prototype.input_id_from_type=function(e){return this.input_name_from_type(e).replace(/([\[\(])|(\]\[)/g,"_").replace(/[\]\)]/g,"")},t}()})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("instance_tag",["cream"],function(e){var n,r;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(Error),r=function(){function e(e,t,n,r){var i,s,o;r==null&&(r=null),o=[Object.clone(String(e).valueOf()),Object.clone(String(t).valueOf())],this.object_name=o[0],this.method_name=o[1],this.template_object=n,i=/\[\]$/,i.test(this.object_name)?this.object_name=this.object_name.replace(i,""):(i=/\[\]\]$/,i.test(this.object_name)?this.object_name=this.object_name.replace(i,"]"):i=null),this.object=this.retrieve_object(r),i&&(s=i.exec(this.object_name),this.auto_index=this.retrieve_autoindex(this.object_name.slice(0,this.object_name.indexOf(s))))}return e.prototype.retrieve_object=function(e){if(e)return e;if(this.template_object[""+this.object_name]!=null)return this.template_object[""+this.object_name]},e.prototype.retrieve_autoindex=function(e){var t;t=this.object||this.template_object[""+e];if(t)return JSON.stringify(t);throw new n("object[] naming but object param and @object var don't exist or don't respond to to_param: "+t.inspect)},e}()})}.call(this),function(){define("date_helper",["datetime_selector","tag_helper","instance_tag"],function(e,t,n){var r;return r=function(){function t(){}return t.prototype.date_select=function(e,t,r,i){var s;return r==null&&(r={}),i==null&&(i={}),delete r.object,s=new n(e,t,this,r),s.to_date_select_tag(r,i)},t.prototype.time_select=function(e,t,r,i){return r==null&&(r={}),i==null&&(i={}),delete r.object,(new n(e,t,this,r)).to_time_select_tag(r,i)},t.prototype.datetime_select=function(e,t,r,i){return r==null&&(r={}),i==null&&(i={}),delete r.object,(new n(e,t,this,r)).to_datetime_select_tag(r,i)},t.prototype.select_datetime=function(t,n,r){return n==null&&(n={}),r==null&&(r={}),arguments.length===0&&(t===null||t===void 0)&&(t=new Date),(new e(t,n,r)).select_datetime()},t.prototype.select_date=function(t,n,r){return n==null&&(n={}),r==null&&(r={}),arguments.length===0&&(t===null||t===void 0)&&(t=new Date),(new e(t,n,r)).select_date()},t.prototype.select_time=function(t,n,r){return t==null&&(t=Time.current),n==null&&(n={}),r==null&&(r={}),(new e(t,n,r)).select_time()},t.prototype.select_second=function(t,n,r){return n==null&&(n={}),r==null&&(r={}),(new e(t,n,r)).select_second()},t.prototype.select_minute=function(t,n,r){return n==null&&(n={}),r==null&&(r={}),(new e(t,n,r)).select_minute()},t.prototype.select_hour=function(t,n,r){return n==null&&(n={}),r==null&&(r={}),(new e(t,n,r)).select_hour()},t.prototype.select_day=function(t,n,r){return n==null&&(n={}),r==null&&(r={}),(new e(t,n,r)).select_day()},t.prototype.select_month=function(t,n,r){return n==null&&(n={}),r==null&&(r={}),(new e(t,n,r)).select_month()},t.prototype.select_year=function(t,n,r){return n==null&&(n={}),r==null&&(r={}),(new e(t,n,r)).select_year()},t}(),n.prototype.to_date_select_tag=function(e,t){return e==null&&(e={}),t==null&&(t={}),this.datetime_selector(e,t).select_date().html_safe().valueOf()},n.prototype.to_time_select_tag=function(e,t){return e==null&&(e={}),t==null&&(t={}),this.datetime_selector(e,t).select_time().html_safe().valueOf()},n.prototype.to_datetime_select_tag=function(e,t){return e==null&&(e={}),t==null&&(t={}),this.datetime_selector(e,t).select_datetime().html_safe().valueOf()},n.prototype.datetime_selector=function(t,n){var r,i,s;return r=(typeof (i=this.object)[s=this.method_name]=="function"?i[s]():void 0)||this.default_datetime(t),this.auto_index||(this.auto_index=null),t=Object.clone(t),t.field_name=this.method_name,t.include_position=!0,t.prefix||(t.prefix=this.object_name),this.auto_index&&t.index==null&&(t.index=this.auto_index),new e(r,t,n)},n.prototype.default_datetime=function(e){var t,n,r,i,s,o;if(!e.include_blank&&!e.prompt){if(!e["default"])return new Date;if(e["default"]instanceof Date)return e["default"];t=Object.clone(e["default"]),t.min||(t.min=t.minute),t.sec||(t.sec=t.second),r=new Date,o=["month","hours","minutes","seconds"];for(i=0,s=o.length;i<s;i++)n=o[i],t[n]||(t[n]=r["get"+n.capitalize()]());return t.fullYear||(t.fullYear=r.getFullYear()),t.day||(t.day=r.getDate()),new Date(t.fullYear,t.month,t.day,t.hours,t.minutes,t.seconds)}},new r})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=[].slice;define("url_helper",["tag_helper"],function(n){var r,i,s;return r=function(){function t(){this.extract_record=e(this.extract_record,this),this.build_named_route_call=e(this.build_named_route_call,this),this.routing_type=e(this.routing_type,this),this.action_prefix=e(this.action_prefix,this),this.polymorphic_url=e(this.polymorphic_url,this)}return t.prototype.polymorphic_url=function(e,t){var n,r,i,s,o;t==null&&(t={}),e instanceof Array&&(e=e.compact()),e.length===1&&(e=e[0]),s=this.extract_record(e),n=e instanceof Array?Object.clone(e):[e],r=t.action&&String(t.action)==="new"?(n.pop(),"singular"):s.id?s instanceof Backbone.Model?(n.pop(),"plural"):"singular":(n.pop(),"plural"),Object.delete_if(n,function(e){return e instanceof String||typeof e=="string"}),i=this.build_named_route_call(e,r,t),o=Object.except(t,"action","routing_type");if(Object.keys(o).length!==0)return Object.isPlainObject(n.last())?n.last().update(o):(n.push(o),n)},t.prototype.action_prefix=function(e){return e.action!=null?""+e.action+"_":""},t.prototype.routing_type=function(e){return e.routing_type||"url"},t.prototype.build_named_route_call=function(e,t,n){var r,i;n==null&&(n={}),e instanceof Array?(r=e.pop(),i=e.map(function(e){return function(e){return e instanceof String||typeof e=="string"?e:Naming.singular_route_key(e)}}(this))):(r=this.extract_record(e),i=[]);if(r instanceof String||typeof r=="string")i.push(r);else{if(!r)throw new ArgumentError("Nil location provided. Can't build URI.");t==="singular"?i.push(Naming.singular_route_key(r)):i.push(Naming.route_key(r))}return i.push(this.routing_type(n)),this.action_prefix(n)+i.join("_")},t.prototype.extract_record=function(e){return e instanceof Array?e.last():Object.isPlainObject(e)?e.id:e},t}(),i=function(){function e(){}return e.prototype.url_for=function(e){if(typeof e=="string")return e;if(e.url&&typeof e.url=="function")return e.url()},e.prototype.link_to=function(){var e,r,i,s,o,u,a,f;return e=1<=arguments.length?t.call(arguments,0):[],o=e[0],u=e[1]||{},s=e[2]||{},f=this.url_for(u),r=s.href,a=n.tag_options(s)||"",r||(i='href="'+n.html_escape(f)+'"'),"<a "+i+a+">"+n.html_escape(o||f)+"</a>"},e}(),s=new i,{link_to:s.link_to,url_for:s.url_for}})}.call(this),function(){define("asset_tag_helper",["cream","tag_helper"],function(e,t){var n,r,i;return r=function(e,t){var n;return t==null&&(t=null),n=e.split("/").last(),t?n.replace(new RegExp(""+t.replace(/\./g,"\\.").replace(/\*/g,".*")+"$"),""):n},n=function(){function e(){}return e.prototype.image_path=function(e){return"/images/"+e},e.prototype.path_to_image=function(e){return this.image_path(e)},e.prototype.image_tag=function(e,n){var r,i,s,o;n==null&&(n={}),s=n.src=this.path_to_image(e);if(s!=null?!s.match(/^cid:/):!void 0)n.alt||(n.alt=this.image_alt(s));(i=Object["delete"](n,"size"))&&i.match(/^\d+x\d+$/)&&(o=i.split("x"),n.width=o[0],n.height=o[1]);if(r=Object["delete"](n,"mouseover"))n.onmouseover="this.src='"+this.path_to_image(r)+"'",n.onmouseout="this.src='"+s+"'";return t.tag("img",n)},e.prototype.image_alt=function(e){return r(e,".*").capitalize()},e}(),i=new n,{image_path:i.image_path,path_to_image:i.path_to_image,image_tag:i.image_tag,image_alt:i.image_alt}})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};define("form_options_helper",["cream","tag_helper"],function(r,i){var s,o;return s=function(){function r(){this.extract_selected_and_disabled=e(this.extract_selected_and_disabled,this),this.is_option_value_selected=e(this.is_option_value_selected,this),this.option_text_and_value=e(this.option_text_and_value,this),this.option_html_attributes=e(this.option_html_attributes,this),this.options_for_select=e(this.options_for_select,this)}return r.prototype.options_for_select=function(e,t){var n,r;return t==null&&(t=null),typeof e=="string"?e:(r=this.extract_selected_and_disabled(t).map(function(e){return Array.wrap(e).map(function(e){return e instanceof String?e:String(e)})}),t=r[0],n=r[1],Object.isPlainObject(e)&&(e=Object.toArray(e)),e.map(function(e){return function(r){var s,o,u,a,f,l;return o=e.option_html_attributes(r),l=e.option_text_and_value(r).map(function(e){return e instanceof String?e:String(e)}),a=l[0],f=l[1],e.is_option_value_selected(f,t)&&(u=' selected="selected"'),n&&e.is_option_value_selected(f,n)&&(s=' disabled="disabled"'),'<option value="'+i.html_escape(f)+'"'+(u||"")+(s||"")+(o||"")+">"+i.html_escape(a)+"</option>"}}(this)).join("\n").html_safe())},r.prototype.option_html_attributes=function(e){var n,r,s,o;if(e instanceof Array){n=[],o=e.select(function(e){return Object.isPlainObject(e)}).reduce(Object.merge,{});for(r in o){if(!t.call(o,r))continue;s=o[r],n.push(" "+r+'="'+i.html_escape(s.toString())+'"')}return n.join("")}return""},r.prototype.option_text_and_value=function(e){return e instanceof Array?(e=e.reject(function(e){return function(e){return Object.isPlainObject(e)}}(this)),[e.first(),e.last()]):!(e instanceof String)&&e.first instanceof Function&&e.last instanceof Function?[e.first(),e.last()]:[e,e]},r.prototype.is_option_value_selected=function(e,t){return t instanceof Array?n.call(t,e)>=0:Object.isPlainObject(t)?t[e]!=null:e===t},r.prototype.extract_selected_and_disabled=function(e){var t;return e instanceof Function?[e,null]:(e=Array.wrap(e),t=e.extract_options(),[t.selected!=null?t.selected:e,t.disabled])},r}(),o=new s,{options_for_select:o.options_for_select}})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("form_tag_helper",["cream","tag_helper"],function(t,n){var r,i;return r=function(){function t(){this.sanitize_to_id=e(this.sanitize_to_id,this),this.label_tag=e(this.label_tag,this),this.select_tag=e(this.select_tag,this)}return t.prototype.select_tag=function(e,t,r){var i,s;t==null&&(t=null),r==null&&(r={}),i=r.multiple===!0&&!(new String(e)).endsWith("[]")?""+e+"[]":e,Object["delete"](r,"include_blank")&&(t='<option value=""></option>'.html_safe().concat(t));if(s=Object["delete"](r,"prompt"))t=('<option value="">'+s+"</option>").html_safe().concat(t);return n.content_tag("select",t,Object.update({name:i,id:this.sanitize_to_id(e)},r))},t.prototype.label_tag=function(e,t,r){var i;return t==null&&(t=null),r&&Object.isPlainObject(t)?i=t:i||(i={}),e.trim().length!==0&&i["for"]==null&&(i["for"]=this.sanitize_to_id(e)),n.content_tag("label",t||String(e).humanize(),i,r)},t.prototype.sanitize_to_id=function(e){return(new String(e)).replace(/]/g,"").replace(/[^-a-zA-Z0-9:.]/g,"_")},t}(),i=new r,{select_tag:i.select_tag}})}.call(this),function(){define("cafe",["date_helper","url_helper","asset_tag_helper","form_options_helper","form_tag_helper"],function(e,t,n,r,i){var s,o,u;o=typeof window!="undefined"&&window!==null?window:global;for(s in e)u=e[s],o[s]=u;for(s in t)u=t[s],o[s]=u;for(s in n)u=n[s],o[s]=u;for(s in r)u=r[s],o[s]=u;for(s in i)u=i[s],o[s]=u;return o})}.call(this);